QSEN_lavaan <- QSEN

names(QSEN_lavaan)[2:ncol(QSEN_lavaan)] <- paste0("v", names(QSEN_lavaan)[2:ncol(QSEN_lavaan)])

lavaan_model_syn <- "
  F1 =~ v134984 + v135693 + v134991 + v135017 + v190570 + v194244 + v135763 + v194320 + v197196 + v134539 + v135180 + v135260 + v135587 + v135732 + v197387 + v203303 + v220527 + v190463 + v135213 + v135317 + v135321 + v135551 + v135664 + v137320 + v137327 + v166216 + v166217 + v164860 + v135346 + v206345 + v134536 + v135226 + v135474 + v135492 + v135569 + v137290 + v161365 + v161367 + v161370 + v135065 + v135316 + v135365 + v135487 + v135657 + v135697 + v137388 + v166215 + v135358 + v135043 + v135210 + v135669 + v141577 + v160512 + v166224 + v166937 + v135480 + v168552 + v197220 + v231268 + v134152 + v203296 + v190584 + v134952 + v133900 + v134538 + v134546 + v135254 + v135437 + v135590 + v135751 + v135239 + v137351 + v149998 + v189900 + v135342 + v135393 + v230165 + v230485 + v231293 + v135482 + v167416 + v135518 + v230490 + v168560 + v229863 + v228441 + v203310 + v205763 + v231451 + v134988 + v221178 + v221353 + v197602 + v221354 + v135133 + v221355 + v134729 + v197971 + v164844 + v134987 + v160523 + v198573 + v135047 + v135345 + v160521 + v169627 + v133988 + v134569 + v135086 + v135491 + v160528 + v135722 + v135455 + v167527 + v160522 + v135563 + v135568 + v197932 + v167533 + v197216 + v167537 + v164840 + v231445 + v134699 + v135658 + v135280 + v197757 + v135519 + v233540 + v135628 + v135750 + v135617 + v203308 + v198179 + v135626 + v198574 + v198181 + v135532 + v135623 + v135184 + v135318 + v135633 + v150314 + v203288 + v134465 + v135176 + v169612 + v197418 + v135642 + v135654 + v135740 + v135558 + v135159 + v137294 + v135577 + v135102 + v135445 + v206334 + v198655 + v135084 + v135248 + v137323 + v134809 + v135356 + v135368 + v135663 + v135721 + v166209 + v166212 + v172827 + v167526 + v137293 + v172833 + v134616 + v137319 + v177393 + v135661 + v135169 + v135170 + v135246 + v135653 + v135364 + v135377 + v133913 + v192305 + v135453 + v231272 + v134694 + v135672 + v135694 + v135486 + v135580 + v229816 + v135006 + v230163 + v164846 + v172826 + v197926 + v135281 + v135299 + v160505 + v135604 + v135635 + v135259 + v176867 + v134831 + v135285 + v135494 + v194238 + v167656 + v177391 + v197206 + v135485 + v229786 + v231449 + v198578 + v134902 + v167446 + v197923 + v134841 + v135575 + v135605 + v135640 + v198570 + v205752 + v135354 + v160518
  F2 =~ v134907 + v134997 + v135767 + v220522 + v188754 + v168541 + v135195 + v231446 + v233539 + v135729 + v231285 + v161366 + v231282 + v233534 + v231232 + v231452 + v230173 + v231453 + v233538 + v197963 + v134863 + v229807 + v135559 + v135634 + v198662 + v134226 + v161368 + v203243 + v135770 + v144031 + v135716 + v206344 + v206818 + v135696 + v198656 + v135433 + v135745 + v203242 + v135731 + v231277 + v222085 + v135686 + v194232
  F3 =~ v134981 + v134570 + v134556 + v134934 + v134962 + v135009 + v135018 + v135738 + v135275 + v190586 + v194272 + v197125 + v196835 + v135021 + v197116 + v197199 + v196841 + v197250 + v197409 + v190571 + v197265 + v203225 + v133918 + v135251 + v135424 + v149574 + v164863 + v189901 + v169489 + v197117 + v221052 + v197213 + v197274 + v197327 + v135202 + v172825 + v206328 + v133939 + v134509 + v135584 + v137342 + v137348 + v150008 + v169575 + v190585 + v133921 + v135196 + v137291 + v149571 + v188724 + v206336 + v231255 + v135341 + v135448 + v172829 + v196840 + v197094 + v230169 + v228444 + v231258 + v194339 + v134971 + v188726 + v133894 + v133924 + v197249 + v167452 + v188734 + v194263 + v135099 + v135162 + v135420 + v134970 + v134992 + v135266 + v135484 + v167550 + v135396 + v164837 + v231251 + v228440 + v231447 + v230497 + v197225 + v197520 + v197595 + v197676 + v221053 + v134989 + v134990 + v135010 + v135319 + v135079 + v135223 + v135351 + v231261 + v230230 + v197114 + v167531 + v231253 + v198439 + v197410 + v197746 + v197747 + v135678 + v167654 + v197436 + v160507 + v198005 + v134500 + v135177 + v203292 + v197691 + v197519 + v134955 + v203240 + v135536 + v135610 + v197991 + v135339 + v143336 + v150304 + v135622 + v197419 + v177396 + v135505 + v168559 + v135540 + v135257 + v166207 + v188718 + v205754 + v144656 + v205758 + v137363 + v135105 + v197965 + v137283 + v135534 + v198572 + v135075 + v135068 + v167527 + v187198 + v135567 + v135572 + v188737 + v188741 + v197078 + v188752 + v188732 + v188756 + v133919 + v197221 + v197082 + v134018 + v135382 + v197938 + v135163 + v135069 + v188727 + v189911 + v188715 + v134638 + v135161 + v188722 + v135104 + v228427 + v134422 + v135100 + v198658 + v134464 + v134901 + v135641 + v134946 + v190587 + v135300 + v137295 + v197763 + v133893 + v197096 + v197219 + v135650 + v197562 + v203300 + v144661 + v194318 + v135215 + v135371 + v135411 + v227584 + v231250 + v221172 + v168218 + v197434 + v197701 + v198568 + v172830 + v172891 + v135190
  F4 =~ v134943 + v135001 + v135026 + v134950 + v134978 + v194224 + v134933 + v135470 + v194251 + v197228 + v135027 + v194314 + v194345 + v206819 + v133903 + v135153 + v135369 + v197097 + v135760 + v194350 + v197108 + v197260 + v203304 + v203434 + v134442 + v135054 + v135057 + v135671 + v143320 + v143353 + v161361 + v133930 + v135201 + v135218 + v137276 + v150302 + v168561 + v166938 + v169629 + v134514 + v134563 + v135085 + v135222 + v135272 + v135586 + v137345 + v192302 + v134452 + v134453 + v135042 + v135208 + v135338 + v135500 + v135503 + v135670 + v137329 + v137335 + v135454 + v135461 + v172834 + v188743 + v229808 + v134960 + v203289 + v206820 + v135333 + v220526 + v133910 + v135262 + v135616 + v135779 + v137349 + v149573 + v197223 + v135451 + v231247 + v135403 + v135405 + v231448 + v231235 + v228442 + v231246 + v228950 + v229031 + v233537 + v197106 + v198674 + v205762 + v134827 + v231178 + v197577 + v197573 + v221356 + v222086 + v160524 + v198703 + v135073 + v135431 + v160520 + v135700 + v137334 + v137344 + v149569 + v149572 + v197475 + v167535 + v135478 + v197642 + v197210 + v228443 + v133916 + v197749 + v135352 + v150300 + v137395 + v197751 + v134482 + v135051 + v135679 + v134044 + v197502 + v137277 + v138757 + v138759 + v135755 + v197974 + v134274 + v135522 + v197962 + v135303 + v164811 + v198420 + v135768 + v197272 + v198483 + v135124 + v135214 + v135771 + v197394 + v150005 + v198193 + v206326 + v194220 + v134691 + v135766 + v137362 + v135684 + v197570 + v137385 + v198530 + v137341 + v144655 + v149996 + v167803 + v188733 + v168558 + v172828 + v172832 + v197073 + v194260 + v197204 + v135243 + v137387 + v133932 + v135680 + v133902 + v135228 + v160516 + v135183 + v135191 + v137339 + v135414 + v190581 + v134686 + v135471 + v231281 + v203226 + v164842 + v194340 + v197640 + v149994 + v166940 + v135591 + v133899 + v203252 + v177394 + v137340 + v190453 + v229809 + v228439 + v233535 + v134968 + v134975 + v135286 + v137391 + v197972 + v135545 + v137278 + v197663 + v133897 + v188736
  F5 =~ v229805 + v137350 + v135531 + v135565 + v135489 + v135397 + v206343 + v135541 + v135514 + v135334
  F6 =~ v137383 + v231318 + v231450 + v231454 + v135295 + v137384 + v203223 + v135727 + v194228

  F1 ~~ F2
  F1 ~~ F3
  F1 ~~ F4
  F1 ~~ F5
  F1 ~~ F6

  F2 ~~ F3
  F2 ~~ F4
  F2 ~~ F5
  F2 ~~ F6

  F3 ~~ F4
  F3 ~~ F5
  F3 ~~ F6

  F4 ~~ F5
  F4 ~~ F6

  F5 ~~ F6
"


use_items <- paste0("v", as.character(unlist(factor_items)))

lavaan_model <- lavaan(model = lavaan_model_syn, 
                       data = QSEN_lavaan, estimator= "MLR", 
                       missing = "fiml", verbose = TRUE)

saveRDS(lavaan_model, paste0("QSEN_lavaan_analysis_result_", date, ".rds"))
